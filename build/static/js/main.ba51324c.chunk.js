(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(15),u=n.n(r),a=n(6),o=n(3),i=n(4),s=n.n(i),d="/api/persons",l={getNumbers:function(){return s.a.get(d).then((function(e){return e.data}))},addNumber:function(e){return s.a.post(d,e).then((function(e){return e.data}))},deleteNumber:function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},updateNumber:function(e,t){return s.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))}},b=n(0),j=function(e){var t=e.filter,n=e.eventHandler;return Object(b.jsx)("div",{children:Object(b.jsxs)("label",{children:["filter shown with ",Object(b.jsx)("input",{value:t,onChange:n})]})})},f=function(e){var t=e.handleFormSubmit,n=e.nameValue,c=e.handleNewName,r=e.numberValue,u=e.handleNewNumber;return Object(b.jsxs)("form",{onSubmit:t,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:n,onChange:c})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:r,onChange:u})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var t=e.name,n=e.number,c=e.deletePerson;return Object(b.jsxs)("li",{children:[t," ",n,Object(b.jsx)("button",{onClick:c,children:"delete"})]})},h=function(e){var t=e.contacts,n=e.deleteHandler;return Object(b.jsx)("ul",{children:t.map((function(e){return Object(b.jsx)(m,{name:e.name,number:e.number,deletePerson:function(){return n(e.id,e.name)}},e.name)}))})},O=function(e){var t=e.message,n=e.isError;return t?n?Object(b.jsx)("div",{className:"error",children:t}):Object(b.jsx)("div",{className:"notification",children:t}):null},p=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],u=Object(c.useState)(""),i=Object(o.a)(u,2),s=i[0],d=i[1],m=Object(c.useState)(""),p=Object(o.a)(m,2),v=p[0],x=p[1],w=Object(c.useState)(""),N=Object(o.a)(w,2),g=N[0],y=N[1],S=Object(c.useState)(""),k=Object(o.a)(S,2),C=k[0],T=k[1],E=Object(c.useState)(!1),H=Object(o.a)(E,2),V=H[0],P=H[1],D=n.filter((function(e){return e.name.toLowerCase().includes(g)}));return Object(c.useEffect)((function(){l.getNumbers().then((function(e){return r(e)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(O,{message:C,isError:V}),Object(b.jsx)(j,{filter:g,eventHandler:function(e){y(e.target.value.toLowerCase())}}),Object(b.jsx)(f,{handleFormSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name===s}));t?window.confirm("".concat(s," is already added to phonebook.  Would you like to update their information?"))&&l.updateNumber(t.id,Object(a.a)(Object(a.a)({},t),{},{number:v})).then((function(e){r(n.map((function(t){return t.id===e.id?e:t}))),T("".concat(t.name," was successfully updated!")),setTimeout((function(){T("")}),5e3)})).catch((function(e){P(!0),T("".concat(t.name," was already deleted from the server")),r(n.filter((function(e){return e.id!==t.id}))),setTimeout((function(){T(""),P(!1)}),5e3)})):l.addNumber({name:s,number:v}).then((function(e){r(n.concat(e)),T("".concat(e.name," was added successfully!")),setTimeout((function(){T("")}),5e3)})).catch((function(e){P(!0),T(e.response.data.toString()),setTimeout((function(){T(""),P(!1)}),5e3),console.log(e.response.data)}));d(""),x("")},nameValue:s,handleNewName:function(e){d(e.target.value)},numberValue:v,handleNewNumber:function(e){x(e.target.value)}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(h,{deleteHandler:function(e,t){window.confirm("Do you really want to delete ".concat(t,"?"))&&l.deleteNumber(e).then((function(){r(n.filter((function(t){return t.id!==e}))),T("".concat(t," was successfully deleted!")),setTimeout((function(){T("")}),5e3)}))},contacts:D})]})};n(39);u.a.render(Object(b.jsx)(p,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ba51324c.chunk.js.map